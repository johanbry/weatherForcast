(()=>{var e={804:(e,t)=>{t.Od=function(e){return e.replace(/[^\u0000-\u007e]/g,(function(e){return s[e]||e}))};for(var a=[{base:" ",chars:" "},{base:"0",chars:"߀"},{base:"A",chars:"ⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",chars:"Ꜳ"},{base:"AE",chars:"ÆǼǢ"},{base:"AO",chars:"Ꜵ"},{base:"AU",chars:"Ꜷ"},{base:"AV",chars:"ꜸꜺ"},{base:"AY",chars:"Ꜽ"},{base:"B",chars:"ⒷＢḂḄḆɃƁ"},{base:"C",chars:"ⒸＣꜾḈĆCĈĊČÇƇȻ"},{base:"D",chars:"ⒹＤḊĎḌḐḒḎĐƊƉᴅꝹ"},{base:"Dh",chars:"Ð"},{base:"DZ",chars:"ǱǄ"},{base:"Dz",chars:"ǲǅ"},{base:"E",chars:"ɛⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎᴇ"},{base:"F",chars:"ꝼⒻＦḞƑꝻ"},{base:"G",chars:"ⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾɢ"},{base:"H",chars:"ⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",chars:"ⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",chars:"ⒿＪĴɈȷ"},{base:"K",chars:"ⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",chars:"ⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",chars:"Ǉ"},{base:"Lj",chars:"ǈ"},{base:"M",chars:"ⓂＭḾṀṂⱮƜϻ"},{base:"N",chars:"ꞤȠⓃＮǸŃÑṄŇṆŅṊṈƝꞐᴎ"},{base:"NJ",chars:"Ǌ"},{base:"Nj",chars:"ǋ"},{base:"O",chars:"ⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OE",chars:"Œ"},{base:"OI",chars:"Ƣ"},{base:"OO",chars:"Ꝏ"},{base:"OU",chars:"Ȣ"},{base:"P",chars:"ⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",chars:"ⓆＱꝖꝘɊ"},{base:"R",chars:"ⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",chars:"ⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",chars:"ⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"Th",chars:"Þ"},{base:"TZ",chars:"Ꜩ"},{base:"U",chars:"ⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",chars:"ⓋＶṼṾƲꝞɅ"},{base:"VY",chars:"Ꝡ"},{base:"W",chars:"ⓌＷẀẂŴẆẄẈⱲ"},{base:"X",chars:"ⓍＸẊẌ"},{base:"Y",chars:"ⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",chars:"ⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",chars:"ⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐɑ"},{base:"aa",chars:"ꜳ"},{base:"ae",chars:"æǽǣ"},{base:"ao",chars:"ꜵ"},{base:"au",chars:"ꜷ"},{base:"av",chars:"ꜹꜻ"},{base:"ay",chars:"ꜽ"},{base:"b",chars:"ⓑｂḃḅḇƀƃɓƂ"},{base:"c",chars:"ｃⓒćĉċčçḉƈȼꜿↄ"},{base:"d",chars:"ⓓｄḋďḍḑḓḏđƌɖɗƋᏧԁꞪ"},{base:"dh",chars:"ð"},{base:"dz",chars:"ǳǆ"},{base:"e",chars:"ⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇǝ"},{base:"f",chars:"ⓕｆḟƒ"},{base:"ff",chars:"ﬀ"},{base:"fi",chars:"ﬁ"},{base:"fl",chars:"ﬂ"},{base:"ffi",chars:"ﬃ"},{base:"ffl",chars:"ﬄ"},{base:"g",chars:"ⓖｇǵĝḡğġǧģǥɠꞡꝿᵹ"},{base:"h",chars:"ⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",chars:"ƕ"},{base:"i",chars:"ⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",chars:"ⓙｊĵǰɉ"},{base:"k",chars:"ⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",chars:"ⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇɭ"},{base:"lj",chars:"ǉ"},{base:"m",chars:"ⓜｍḿṁṃɱɯ"},{base:"n",chars:"ⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥлԉ"},{base:"nj",chars:"ǌ"},{base:"o",chars:"ⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿꝋꝍɵɔᴑ"},{base:"oe",chars:"œ"},{base:"oi",chars:"ƣ"},{base:"oo",chars:"ꝏ"},{base:"ou",chars:"ȣ"},{base:"p",chars:"ⓟｐṕṗƥᵽꝑꝓꝕρ"},{base:"q",chars:"ⓠｑɋꝗꝙ"},{base:"r",chars:"ⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",chars:"ⓢｓśṥŝṡšṧṣṩșşȿꞩꞅẛʂ"},{base:"ss",chars:"ß"},{base:"t",chars:"ⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"th",chars:"þ"},{base:"tz",chars:"ꜩ"},{base:"u",chars:"ⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",chars:"ⓥｖṽṿʋꝟʌ"},{base:"vy",chars:"ꝡ"},{base:"w",chars:"ⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",chars:"ⓧｘẋẍ"},{base:"y",chars:"ⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",chars:"ⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],s={},r=0;r<a.length;r+=1)for(var n=a[r].chars,c=0;c<n.length;c+=1)s[n[c]]=a[r].base}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,a),n.exports}(()=>{"use strict";var e;!function(e){e[e.Sunday=0]="Sunday",e[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday"}(e||(e={}));const t=(e,t)=>{const a=new Date(1e3*(e+t));let s=a.getUTCHours(),r=a.getUTCMinutes();return s=s<10?"0"+s:s,r=r<10?"0"+r:r,`${s}:${r}`},s=(e,t)=>{const a=new Date(1e3*(e+t)),s=a.getUTCFullYear();let r=a.getUTCMonth()+1,n=a.getUTCDate();return r=r<10?"0"+r:r,n=n<10?"0"+n:n,`${s}-${r}-${n}`},r=(t,a)=>{const s=new Date(1e3*(t+a)).getUTCDay();return e[s]},n=e=>Math.round(e),c={API_URL:"https://weather-forecast-2023.herokuapp.com/"};var o=function(e,t,a,s){return new(a||(a=Promise))((function(r,n){function c(e){try{i(s.next(e))}catch(e){n(e)}}function o(e){try{i(s.throw(e))}catch(e){n(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(c,o)}i((s=s.apply(e,t||[])).next())}))};const i=(e,a)=>o(void 0,void 0,void 0,(function*(){const s=`${c.API_URL}api/weather/${e}/${a}?mode=weather`;console.log("url",s);try{const e=yield fetch(s),a=yield e.json(),r=a.weather[0].main,c=t(Date.now()/1e3,a.timezone);(e=>{const t=document.querySelector("#city"),a=document.querySelector("#localTime"),s=document.querySelector("#temperature"),r=document.querySelector("#weatherDescription");t.textContent=e.city,a.textContent=e.localTime,s.innerHTML=`${e.temperature.toString()}&#176`,r.textContent=e.weather})({city:a.name,localTime:c,temperature:n(a.main.temp),weather:a.weather[0].description}),((e,t)=>{let a="";document.querySelector(".current-weather");let s=!1,r=document.querySelector("video");r&&(s=!0),s||(r=document.createElement("video"));const n=document.querySelector("body");switch(r.innerHTML="",e){case"Thunderstorm":a="/assets/videos/thunderstorm-304.mp4";break;case"Drizzle":case"Rain":a="/assets/videos/rain-28236.mp4";break;case"Snow":a="/assets/videos/snow-7090.mp4";break;case"Clear":a="/assets/videos/sun-36816.mp4";break;case"Clouds":a="/assets/videos/cloud-3186.mp4";break;default:a="/assets/videos/mist-2166.mp4"}r.src=a,r.autoplay=!0,r.controls=!1,r.muted=!0,r.loop=!0,s||n.prepend(r)})(r)}catch(e){throw e}})),h=(e,a)=>o(void 0,void 0,void 0,(function*(){const r=`http://localhost:3000/api/weather/${e}/${a}?mode=forecast`;try{const e=yield fetch(r),a=yield e.json(),c=a.city.timezone,o=(s(Date.now()/1e3,c),d(a.list,c)),i=[];a.list.slice(0,8).forEach((e=>{i.push({localTime:t(e.dt,c),temperature:n(e.main.temp),weatherIcon:`http://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`,weatherDescription:e.weather[0].description})})),(e=>{const t=document.querySelector("#currentHours");t.innerHTML="",e.forEach((e=>{const a=document.createElement("div"),s=document.createElement("p"),r=document.createElement("img"),n=document.createElement("small");a.classList.add("weather-card"),s.textContent=e.localTime,r.src=e.weatherIcon,n.innerHTML=`${e.temperature.toString()}&#176`,r.setAttribute("alt",e.weatherDescription),a.append(s,r,n),t.appendChild(a)}))})(i),(e=>{const t=document.querySelector(".forecast"),a=document.createElement("small");a.innerHTML="5-days forecast weather",t.innerHTML="",t.append(a),e.forEach((e=>{const a=document.createElement("div"),s=document.createElement("p"),r=document.createElement("img"),n=document.createElement("p"),c=document.createElement("i");a.classList.add("forecast-overview-card"),c.classList.add("fa-solid","fa-chevron-down"),s.textContent=e.weekday,r.src=e.weatherIcon,n.innerHTML=`${e.minTemp.toString()}/${e.maxTemp.toString()}&#176`,r.setAttribute("alt",e.weatherDescription),a.append(s,r,n,c);const o=(e=>{const t=document.createElement("table"),a=document.createElement("tr");return t.classList.add("hide"),a.innerHTML="<th>Time</th><th>Weather</th><th>Temp</th><th>Wind <span>m/s</span></th><th>Humidity <span>%</span></th>",t.appendChild(a),e.forEach((e=>{const a=document.createElement("tr");a.innerHTML=`<td>${e.time}</td><td><img src="${e.weatherIcon}" alt="${e.weatherDescription}"></td><td>${e.temp}&#176</td><td>${e.wind}</td><td>${e.humidity}</td>`,t.appendChild(a)})),t})(e.intervals);t.append(a,o),a.addEventListener("click",(()=>{o.classList.toggle("hide"),c.classList.toggle("fa-chevron-down"),c.classList.toggle("fa-chevron-up")}))})),document.querySelector(".loader-container").style.display="none"})(o)}catch(e){throw e}})),d=(e,a)=>{let c,o=[],i=s(e[0].dt,a),h=[],d=0,l=0;for(let u=0;u<e.length;u++){const m=s(e[u].dt,a);let b;b=u!==e.length-1?s(e[u+1].dt,a):"",0!==u&&i===m||(i=m,d=e[u].main.temp,l=e[u].main.temp),d>e[u].main.temp&&(d=e[u].main.temp),l<e[u].main.temp&&(l=e[u].main.temp);const p={time:t(e[u].dt,a),weatherIcon:`http://openweathermap.org/img/wn/${e[u].weather[0].icon}@2x.png`,weatherDescription:e[u].weather[0].description,temp:n(e[u].main.temp),wind:e[u].wind.speed,humidity:e[u].main.humidity};if(h.push(p),u===e.length-1||i!==b){const t=h.length,s=Math.round(t/2)-1;c={date:m,weekday:r(e[u].dt,a),weatherIcon:h[s].weatherIcon,weatherDescription:h[s].weatherDescription,minTemp:n(d),maxTemp:n(l),intervals:h},o.push(c),h=[]}}return o},l=a(804).Od,u=document.querySelector("#citySearch"),m=59.334591,b=18.06324,p={enableHighAccuracy:!0,timeout:5e3,maximumAge:0},f=e=>{const{latitude:t,longitude:a}=e.coords;i(t,a),h(t,a)};function y(e){switch(i(m,b),h(m,b),e.code){case e.PERMISSION_DENIED:console.log("User denied the request for Geolocation.");break;case e.POSITION_UNAVAILABLE:console.log("Location information is unavailable.");break;case e.TIMEOUT:console.log("The request to get user location timed out.");break;default:console.log("An unknown error occurred.")}}var w=function(e,t,a,s){return new(a||(a=Promise))((function(r,n){function c(e){try{i(s.next(e))}catch(e){n(e)}}function o(e){try{i(s.throw(e))}catch(e){n(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(c,o)}i((s=s.apply(e,t||[])).next())}))};w(void 0,void 0,void 0,(function*(){navigator.geolocation?navigator.geolocation.getCurrentPosition(f,y,p):(alert("Geolocation is not supported by this browser."),i(m,b),h(m,b))}));const v=document.querySelector("#citySearch");v.addEventListener("input",(()=>w(void 0,void 0,void 0,(function*(){let e=[];var t;v.value.length>2&&(e=yield(t=v.value,o(void 0,void 0,void 0,(function*(){const e=`http://localhost:3000/api/cities/filter?city=${t}`,a=yield fetch(e);return yield a.json()})))),((e,t)=>{let a=[];a=t.split(" ");const s=t.length;let r=document.querySelector("#filteredCities");r.textContent="",e.forEach((e=>{const t=document.createElement("div"),n=`${e.name}, ${e.country}`;let c="",o=n;if(a.forEach((e=>{const t=new RegExp(e,"gi"),a=n.matchAll(t);for(const e of a)c=o.replace(e[0],`<b>${e[0]}</b>`),o=c})),""===c){const e=l(n);o=e,a.forEach((t=>{const a=new RegExp(t,"gi"),r=e.matchAll(a);for(const e of r)c=`${n.substring(0,e.index)}<b>${n.substring(Number(e.index),Number(e.index)+s)}</b>${n.substring(Number(e.index)+s)}`,o=c}))}""===c&&(o=n,a.forEach((e=>{const t=l(e),a=new RegExp(t,"gi"),r=n.matchAll(a);for(const e of r)c=`${n.substring(0,e.index)}<b>${n.substring(Number(e.index),Number(e.index)+s)}</b>${n.substring(Number(e.index)+s)}`,o=c}))),t.innerHTML=c,t.classList.add("resultItem"),t.addEventListener("click",(()=>{const{lat:t,lon:a}=e.coord;u.value="",r.textContent="",i(t,a),h(t,a)})),r.appendChild(t)}))})(e,v.value)}))))})()})();